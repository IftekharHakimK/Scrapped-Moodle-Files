--Location(Location_ID, Country, City, Road_no., Avenue)
CREATE TABLE LOCATION
(
    LOCATION_ID CHAR(20) PRIMARY KEY,
		COUNTRY CHAR(10) NOT NULL,
		CITY VARCHAR(20) NOT NULL,
		ROAD_NO VARCHAR2(20),
		AVENUE VARCHAR(20)
);

--Stadium(Stadium_ID, Stadium_Name, Capacity, Location_ID)
CREATE TABLE STADIUM
(
    STADIUM_ID CHAR(20) PRIMARY KEY,
		STADIUM_NAME VARCHAR2(30) NOT NULL,
		CAPACITY INTEGER NOT NULL,
		LOCATION_ID CHAR(20) NOT NULL,
		CONSTRAINT STADIUM_FK1 FOREIGN KEY (LOCATION_ID) REFERENCES LOCATION(LOCATION_ID)
);

--Player(Player_ID, Name, Role, Date_of_birth, Batting_style, Bowling_style, Nationality)
CREATE TABLE PLAYER
(
		PLAYER_ID CHAR(20) NOT NULL,
		FIRST_NAME VARCHAR2(50) NOT NULL,
		LAST_NAME VARCHAR2(50) NOT NULL,
		ROLE VARCHAR2(30) NOT NULL,
		DOB DATE,
		BATTING_STYLE CHAR(20),
		BOWLING_STYLE CHAR(20),
		NATIONALITY CHAR(15),
		CONSTRAINT PLAYER_PK PRIMARY KEY(PLAYER_ID)
);

--Manager(Manager_ID, Name, Date_of_birth, Nationality)
CREATE TABLE MANAGER
(
	MANAGER_ID CHAR(20) NOT NULL,
	FIRST_NAME VARCHAR2(50) NOT NULL,
	LAST_NAME VARCHAR2(50) NOT NULL,
	DOB DATE, 
	NATIONALITY CHAR(10),
	CONSTRAINT MANAGER_PK PRIMARY KEY(MANAGER_ID)
);

--Team(Team_ID, Team_Name, Team_type)
CREATE TABLE TEAM
(
		TEAM_ID CHAR(20) NOT NULL,
		TEAM_NAME VARCHAR2(50) NOT NULL,
		TEAM_TYPE CHAR(10) DEFAULT 'NATIONAL',
		CONSTRAINT TEAM_PK PRIMARY KEY(TEAM_ID),
		CHECK ( TEAM_TYPE IN ('NATIONAL','FRANCHISE'))
);

--Contract(Contract_ID, Contract_length, Salary)
CREATE TABLE CONTRACT
(
		CONTRACT_ID CHAR(20) NOT NULL,
		CONTRACT_LENGTH INTEGER NOT NULL,
		SALARY INTEGER NOT NULL,
		CONSTRAINT CONTRACT_PK PRIMARY KEY(CONTRACT_ID),
		CHECK( CONTRACT_LENGTH>0 AND CONTRACT_LENGTH<=10),
		CHECK(SALARY>0)
);

--Plays_for(Contract_ID, Team_ID, Player_ID, Signing_Date)
CREATE TABLE PLAYS_FOR
(
    CONTRACT_ID CHAR(20) NOT NULL,
		TEAM_ID CHAR(20) NOT NULL,
		PLAYER_ID CHAR(20) NOT NULL,
		SIGNING_DATE DATE,
	  CONSTRAINT PLAYS_FOR_PK PRIMARY KEY (CONTRACT_ID, TEAM_ID),
		CONSTRAINT PLAY_FOR_FK1 FOREIGN KEY (PLAYER_ID) REFERENCES PLAYER(PLAYER_ID),
		CONSTRAINT PLAY_FOR_FK2 FOREIGN KEY (TEAM_ID) REFERENCES TEAM(TEAM_ID)
);

--Manages(Contract_ID, Team_ID, Manager_ID, Signing_Date)
CREATE TABLE MANAGES
(
    CONTRACT_ID CHAR(20) NOT NULL,
		TEAM_ID CHAR(20) NOT NULL,
		MANAGER_ID CHAR(20) NOT NULL,
		SIGNING_DATE DATE,
		CONSTRAINT MANAGES_PK PRIMARY KEY (CONTRACT_ID, TEAM_ID),
		CONSTRAINT MANAGES_FK1 FOREIGN KEY (MANAGER_ID) REFERENCES MANAGER(MANAGER_ID),
		CONSTRAINT MANAGES_FK2 FOREIGN KEY (TEAM_ID) REFERENCES TEAM(TEAM_ID)
);

--Tournament(Tournament_ID, Tournament_Name, Format, System, Prize_Money, Point_for_Win, Point_for_NR, System, MOTT, Award_Money)
CREATE TABLE TOURNAMENT 
(
	TOURNAMENT_ID CHAR(20) NOT NULL,
	TOURNAMENT_NAME VARCHAR2(50) NOT NULL,
	FORMAT CHAR(10) DEFAULT 'ODI',
	SYSTEM CHAR(10) DEFAULT 'CUP',
	PRIZE_MONEY INTEGER NOT NULL,
	POINT_W INTEGER DEFAULT 3,
	POINT_NR INTEGER DEFAULT 1,
	MOTT CHAR(20),
	AWARD_MONEY INTEGER,
	CONSTRAINT TOURNAMENT_PK PRIMARY KEY (TOURNAMENT_ID),
	CONSTRAINT TOURNAMENT_FK1 FOREIGN KEY(MOTT) REFERENCES PLAYER(PLAYER_ID),
	CHECK ( FORMAT IN ('TEST','ODI', 'T20')),
	CHECK ( SYSTEM IN('CUP','LEAGUE')),
	CHECK ( POINT_W IS NOT NULL),
	CHECK ( POINT_NR IS NOT NULL)
);

--Match(Match_ID, Stage, Is_NR, MOTM, Award_Money, Tournament_ID, Date, Stadium_ID)
CREATE TABLE MATCH
(
   MATCH_ID CHAR(20) PRIMARY KEY,
   STAGE CHAR(10) NOT NULL,
	 IS_NR INTEGER NOT NULL,
	 MOTM CHAR(20) ,
	 AWARD_MONEY INTEGER,
	 TOURNAMENT_ID CHAR(20) NOT NULL,
	 MATCH_DATE DATE NOT NULL,
	 STADIUM_ID CHAR(20) NOT NULL,
	 CONSTRAINT MATCH_FK1 FOREIGN KEY (MOTM) REFERENCES PLAYER (PLAYER_ID),
	 CONSTRAINT MATCH_FK2 FOREIGN KEY (TOURNAMENT_ID) REFERENCES TOURNAMENT (TOURNAMENT_ID),
	 CONSTRAINT MATCH_FK3 FOREIGN KEY (STADIUM_ID) REFERENCES STADIUM (STADIUM_ID)
);

--Squad(Squad_ID, Match_ID, Team_ID)
CREATE TABLE SQUAD
(
		SQUAD_ID CHAR(20) NOT NULL,
	  MATCH_ID CHAR(20) NOT NULL,
		TEAM_ID CHAR(20) NOT NULL,
		CONSTRAINT SQUAD_PK PRIMARY KEY (SQUAD_ID),
		CONSTRAINT SQUAD_FK1 FOREIGN KEY (MATCH_ID) REFERENCES MATCH(MATCH_ID),
		CONSTRAINT SQUAD_FK2 FOREIGN KEY (TEAM_ID) REFERENCES TEAM(TEAM_ID)
);

--Played(Squad_ID, Player_ID, attributes)
CREATE TABLE PLAYED
(
    SQUAD_ID CHAR(20) NOT NULL,
		PLAYER_ID CHAR(20) NOT NULL,
		RUN_SCORED INTEGER,
		BALL_FACED INTEGER,
		IS_UNBEATEN CHAR(5),
		FOURS INTEGER,
		SIXES INTEGER,
		POSITION INTEGER,
		OVERS NUMBER(4,1),
		RUN_CONCEDED INTEGER,
		WICKETS INTEGER,
		MAIDENS INTEGER,
		EXTRAS INTEGER,
		CONSTRAINT PLAYED_PK PRIMARY KEY (SQUAD_ID, PLAYER_ID),
		CONSTRAINT PLAYED_FK1 FOREIGN KEY (PLAYER_ID) REFERENCES PLAYER(PLAYER_ID),
		CONSTRAINT PLAYED_FK2 FOREIGN KEY (SQUAD_ID) REFERENCES SQUAD(SQUAD_ID)
);